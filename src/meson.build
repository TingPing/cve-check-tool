libcve = static_library('cve',
    sources: [
        'library/cve-string.c',
        'library/hashmap.c',
        'library/cve-db-lock.c',
        'library/fetch.c',
        'library/template.c',
        'library/util.c',
        'core.c',
    ],
    dependencies: [
        gio_dep,
        libxml_dep,
        curl_dep,
        sqlite_dep,
        openssl_dep,
        check_dep,
    ],
    include_directories: include_directories('library'),
)

libcve_dep = declare_dependency(
    link_with: libcve,
    include_directories: include_directories('library', '.'),
    dependencies: [
        gio_dep,
        libxml_dep,
    ]
)

executable('cve-check-tool',
    sources: [
        'main.c',
        'update.c',
        'plugin-manager.c',
    ],
    dependencies: [
        libcve_dep,
        dl_dep,
    ],
    install: true,
)

executable('cve-check-update',
    sources: [
        'update-main.c',
        'update.c',
    ],
    dependencies: [
        libcve_dep,
        dl_dep,
    ],
    install: true,
)

subdir('plugins')